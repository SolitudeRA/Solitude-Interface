---
import DockNav from '@components/layout/dock/DockNav.astro';
import DockSocial from '@components/layout/dock/DockSocial.astro';
import DockTimeline from '@components/layout/dock/timeline/DockTimeline.astro';
import Dock from '@components/layout/dock/Dock.astro';
import PostViewContainer from '@components/posts/index/PostViewContainer.astro';
import { getPosts } from '@api/ghost/posts';
import { initializeSiteData } from '@api/ghost/settings';
import BaseLayout from '@layouts/base/BaseLayout.astro';
import SiteNavbar from '@components/layout/navbar/SiteNavbar.astro';

const { siteTitle, siteDescription, logoUrl, coverImageUrl } =
    await initializeSiteData();
const posts = await getPosts();
---

<BaseLayout siteTitle={siteTitle} coverImageUrl={coverImageUrl}>
    <SiteNavbar
        logoUrl={logoUrl}
        siteTitle={siteTitle}
        siteSubTitle={siteDescription}
    />
    <PostViewContainer posts={posts} />
    <Dock isFixed={true}>
        <DockTimeline posts={posts} />
        <DockNav />
        <DockSocial />
    </Dock>
</BaseLayout>
