---
import DefaultLayout from "@layouts/global/DefaultLayout.astro";

import {indexGetHighlightPosts} from "@apiClients/ghostPosts";
import {ProxyWorkers} from "@apiClients/utilities";
import IndexMain from "@layouts/index/IndexMain.astro"

const indexPosts = await indexGetHighlightPosts();
const utilities = new ProxyWorkers();
indexPosts.map((post) => {
    post.feature_image = utilities.convertToWorkersUrl(post.feature_image)
})
---

<DefaultLayout>
    <IndexMain posts={indexPosts}/>
</DefaultLayout>