---
import {indexGetHighlightPosts} from "api/ghost/posts";
import {initializeSiteData} from "@apiClients/ghostSettings";
import {Navbar} from "@layouts/global/index"
import {NavbarBrand, NavbarUtility} from "@components/global/navbar"
import {Dock} from "@layouts/global"
import {DockNav, DockTimeline, DockSocial} from "@components/global/dock"
import DefaultLayout from "@layouts/global/DefaultLayout.astro";
import IndexMain from "@layouts/index/IndexMain.astro"

const {siteTitle, siteDescription, logoUrl, coverImageUrl} = await initializeSiteData();
const indexPosts = await indexGetHighlightPosts();
---

<DefaultLayout siteTitle={siteTitle} coverImageUrl={coverImageUrl}>
    <Navbar>
        <NavbarBrand logoImageUrl={logoUrl} siteTitle={siteTitle} siteSubTitle={siteDescription}/>
        <NavbarUtility/>
    </Navbar>
    <IndexMain posts={indexPosts}/>
    <Dock isFixed={true}>
        <DockTimeline posts={indexPosts}/>
        <DockNav/>
        <DockSocial/>
    </Dock>
</DefaultLayout>