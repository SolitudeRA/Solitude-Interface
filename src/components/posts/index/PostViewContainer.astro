---
import type { Post } from '@api/ghost/types';
import { PostType } from '@api/ghost/types';
import PostCardDefault from './Default.astro';
import PostCardArticle from './Article.astro';
import PostCardMusic from './Music.astro';
import PostCardVideo from './Video.astro';
import PostCardGallery from './Gallery.astro';
import PostViewScrollContainer from './PostViewScrollContainer';

interface Props {
    posts: Post[];
}

const { posts } = Astro.props;
---

<PostViewScrollContainer client:load>
    {
        posts.map((post) => {
            const PostCardComponent = (() => {
                switch (post.post_type) {
                    case PostType.DEFAULT:
                        return PostCardDefault;
                    case PostType.ARTICLE:
                        return PostCardArticle;
                    case PostType.MUSIC:
                        return PostCardMusic;
                    case PostType.VIDEO:
                        return PostCardVideo;
                    case PostType.GALLERY:
                        return PostCardGallery;
                    default:
                        return PostCardDefault;
                }
            })();

            return (
                <a
                    href={`/posts/${post.id}`}
                    class="post-card-wrapper flex-shrink-0 flex items-center justify-center transition-all duration-300 ease-out hover:z-10 hover:scale-[1.02]"
                >
                    <PostCardComponent post={post} />
                </a>
            );
        })
    }
</PostViewScrollContainer>

<style>
    .post-card-wrapper {
        width: 302px;
        height: 594px;
    }

    @media (min-width: 1440px) {
        .post-card-wrapper {
            width: 346px;
            height: 673px;
        }
    }

    @media (min-width: 1920px) {
        .post-card-wrapper {
            width: 389px;
            height: 766px;
        }
    }

    @media (min-width: 2560px) {
        .post-card-wrapper {
            width: 432px;
            height: 845px;
        }
    }
</style>
